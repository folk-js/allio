  /**
   * Phase 8: Add jump edges between disconnected components (node-to-node only)
   * Landing nodes are already created in Phase 6
   */
  #addJumpEdges(navmesh: Navmesh): void {
    const nodes = Array.from(navmesh.nodes.values());
    let jumpCount = 0;
    let totalTests = 0;
    let rejectedByComponent = 0;
    let rejectedByDistance = 0;
    let rejectedByPhysics = 0;
    let rejectedByLine = 0;
    let rejectedByParabola = 0;

    for (const fromNode of nodes) {
      // Only jump from platform nodes (hang nodes only drop, landing nodes are targets)
      if (fromNode.type === "landing") continue;
      if (fromNode.type === "hang_left" || fromNode.type === "hang_right") continue;

      for (const toNode of nodes) {
        if (fromNode.id === toNode.id) continue;
        if (fromNode.windowId === toNode.windowId) continue;
        // Can jump to landing nodes (already created) or platform nodes
        if (toNode.type === "hang_left" || toNode.type === "hang_right") continue;

        totalTests++;

        // Skip if in same connected component
        if (fromNode.componentId === toNode.componentId) {
          rejectedByComponent++;
          continue;
        }

        const dx = toNode.pos.x - fromNode.pos.x;
        const dy = toNode.pos.y - fromNode.pos.y;
        const horizontalDist = Math.abs(dx);

        // Check jump constraints
        if (horizontalDist > MAX_JUMP_DISTANCE) {
          rejectedByDistance++;
          continue;
        }

        const maxJumpUp = JUMP_ARC_HEIGHT * 0.5;
        if (dy < -maxJumpUp) {
          rejectedByPhysics++;
          continue;
        }

        if (this.#lineIntersectsWindows(fromNode.pos, toNode.pos)) {
          rejectedByLine++;
          continue;
        }

        if (!this.#isJumpArcClear(fromNode.pos, toNode.pos)) {
          rejectedByParabola++;
          continue;
        }

        // Add jump edge
        const straightDistance = Math.hypot(dx, dy);
        navmesh.addEdge({
          id: `jump_${fromNode.id}_to_${toNode.id}`,
          from: fromNode.id,
          to: toNode.id,
          type: "jump",
          cost: straightDistance * 1.5,
        });
        jumpCount++;
      }
    }

    console.log(`[NavDemo] Jump edges: ${jumpCount}/${totalTests} tests`);
    console.log(`  - Rejected by component: ${rejectedByComponent}`);
    console.log(`  - Rejected by distance: ${rejectedByDistance}`);
    console.log(`  - Rejected by line: ${rejectedByLine}`);
    console.log(`  - Rejected by physics: ${rejectedByPhysics}`);
    console.log(`  - Rejected by parabola: ${rejectedByParabola}`);
  }

